# Backend Chat Application

Этот проект представляет собой бэкенд для приложения для общения, поддерживающего текстовые и голосовые
каналы, а также управление пользователями и серверами.

## Содержание

-   [Описание](#описание)
-   [Требования](#требования)
-   [Быстрый старт](#быстрый-старт)
-   [Установка](#установка)
-   [Запуск приложения](#запуск-приложения)
-   [Миграция базы данных](#миграция-базы-данных)
-   [API](#api)
-   [Документация](#документация)
-   [Лицензия](#лицензия)

## Описание

Бэкенд построен с использованием Node.js и Express. Он поддерживает аутентификацию пользователей, управление
серверами, каналами и обмен сообщениями между пользователями.

## Требования

-   Node.js >= 14.x
-   npm >= 6.x
-   MySQL >= 8.0

## Быстрый старт

Для быстрой настройки проекта используйте автоматический скрипт:

```bash
./setup.sh
```

Или следуйте подробной инструкции в [QUICK_START.md](QUICK_START.md).

## Установка

1. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/yourusername/projectVoice.git
    cd projectVoice/backend
    ```

2. Установите зависимости:

    ```bash
    npm install
    ```

3. Настройте переменные окружения:

    ```bash
    cp .env.example .env
    # Отредактируйте .env файл под ваши настройки
    ```

4. Настройте базу данных MySQL (см. [DEPLOYMENT.md](DEPLOYMENT.md))

5. Запустите миграции:

    ```bash
    npm run db:migrate
    ```

## Запуск приложения

Для запуска приложения в режиме разработки используйте:

```
npm run dev
```

Для запуска в продакшн-режиме используйте:

```
npm start
```

## Миграция базы данных

Чтобы применить миграции и создать необходимые таблицы в базе данных, используйте команду:

```
npm run db:migrate
```

Для отката последней миграции:

```
npm run db:migrate:undo
```

Для проверки статуса миграций:

```
npm run db:migrate:status
```

Чтобы заполнить базу данных начальными данными (если вы создали сиды):

```
npm run db:seed
```

## API

Полная документация API доступна по адресу: `http://localhost:5001/api-docs`

### Основные эндпоинты

-   **POST** `/api/auth/register` - Регистрация пользователя
-   **POST** `/api/auth/login` - Авторизация пользователя
-   **GET** `/api/users/me` - Получение информации о текущем пользователе
-   **GET** `/api/servers` - Получение списка серверов
-   **POST** `/api/servers` - Создание нового сервера

## Документация

- [QUICK_START.md](QUICK_START.md) - Быстрый старт (5 минут)
- [DEPLOYMENT.md](DEPLOYMENT.md) - Полная инструкция по развертыванию
- [ENV_SETUP.md](ENV_SETUP.md) - Настройка переменных окружения

## Лицензия

Этот проект лицензирован под MIT License - смотрите файл [LICENSE](LICENSE) для подробностей.
